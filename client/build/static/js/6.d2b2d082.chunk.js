(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{1466:function(e,t,a){e.exports={lightColor:"#F2F2F2",darkColor:"#212121",cardColor:"#828282",blanc:"#FBFBFB",rouge:"#E55039",vert:"#2CA12A",noir:"#212121",gris:"#F2F2F2",violet:"#583F93",focus:"#2D9CDB",grisFonce:"#828282",noirCD:"#CDCDCD",blancSimple:"#FFFFFF",jauneClair:"#FFF7AE",attention:"#F9EF99",validation:"#DEF6C2",validationHover:"#4CAF50",error:"#F44336",erreur:"#FFCECB",uiattention:"#FFEB3B",standby:"#FDD497",orange:"#FF9800"}},1473:function(e,t,a){"use strict";a.r(t);var n=a(16),s=a(10),r=a(15),o=a(13),i=a(12),l=a(14),c=a(0),u=a.n(c),d=a(23),p=a.n(d),m=a(1419),h=a(1428),g=a(1430),f=a(1422),E=a(145),w=a(411),b=a(708),v=a(21),C=a.n(v),y=a(228),F=a(1467),k=a(31),N=a(20),x=a(24),O=a.n(x),S=a(162),j=a.n(S),L=a(8),V=a(232),M=a(9),B=a(6),D=a(126),P=a(62),A=a(83),T=a(37),_=(a(1466),a(4)),H=a.n(_),I=function(e){function t(){var e,a;Object(s.a)(this,t);for(var r=arguments.length,l=new Array(r),c=0;c<r;c++)l[c]=arguments[c];return(a=Object(o.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(l)))).state={username:"",password:"",cpassword:"",code:"",email:"",phone:"",authy_id:"",traducteur:!1,passwordVisible:!1,redirectTo:"/",step:0,userExists:!1,usernameHidden:!1,showModal:!1},a.togglePasswordVisibility=function(){return a.setState(function(e){return{passwordVisible:!e.passwordVisible}})},a.toggleModal=function(){return a.setState(function(e){return{showModal:!e.showModal}})},a.goBack=function(){return a.setState({step:0,userExists:!1,password:"",cpassword:""})},a.resetPassword=function(){L.a.reset_password({username:a.state.username}).then(function(e){C.a.fire({title:"Yay...",text:"Le mot de passe de r\xe9cup\xe9ration a \xe9t\xe9 envoy\xe9 \xe0 l'adresse mail renseign\xe9e lors de la cr\xe9ation du compte",type:"success"})})},a.send=function(e){if(e.preventDefault(),0===a.state.step){if(0===a.state.username.length)return void C.a.fire({title:"Oops...",text:"Aucun nom d'utilisateur n'est renseign\xe9 !",type:"error",timer:1500});L.a.checkUserExists({username:a.state.username}).then(function(e){a.setState({userExists:200===e.status,step:1})})}else{if(0===a.state.password.length)return C.a.fire({title:"Oops...",text:"Aucun mot de passe n'est renseign\xe9 !",type:"error",timer:1500});if(!a.state.userExists&&a.state.password!==a.state.cpassword)return C.a.fire({title:"Oops...",text:"Les mots de passes ne correspondent pas !",type:"error",timer:1500});if(!a.state.userExists&&(j()(a.state.password)||{}).score<1)return C.a.fire({title:"Oops...",text:"Le mot de passe est trop faible",type:"error",timer:1500});var t={username:a.state.username,password:a.state.password,cpassword:a.state.cpassword,traducteur:a.state.traducteur,code:a.state.code,email:a.state.email,phone:a.state.phone};L.a.login(t).then(function(e){C.a.fire({title:"Yay...",text:"Authentification r\xe9ussie !",type:"success",timer:1500}).then(function(){a.props.history.push(a.state.redirectTo)}),localStorage.setItem("token",e.data.token),Object(V.a)(e.data.token),a.props.fetch_user()}).catch(function(e){501===e.response.status?a.setState({showModal:!1,step:2}):502===e.response.status?a.setState({showModal:!0,phone:O.a.get(e,"response.data.phone",""),email:O.a.get(e,"response.data.email","")}):console.log(e.response)})}},a.handleChange=function(e){return a.setState(Object(n.a)({},e.target.id,e.target.value))},a.upcoming=function(){return C.a.fire({title:"Oh non!",text:"Cette fonctionnalit\xe9 n'est pas encore disponible",type:"error",timer:1500})},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.state;e&&this.setState({traducteur:e.traducteur,redirectTo:e.redirectTo||"/"}),window.scrollTo(0,0)}},{key:"render",value:function(){var e=this.state,t=e.passwordVisible,a=e.username,n=e.step,s=e.userExists,r=e.code,o=e.showModal,i=e.email,l=e.phone,c=this.props.t;return u.a.createElement("div",{className:"app flex-row align-items-center login"},u.a.createElement("div",{className:"login-wrapper"},1===n&&!s&&u.a.createElement(z,{goBack:this.goBack,t:c}),u.a.createElement(m.a,{className:"card-login main-card"},u.a.createElement(h.a,null,u.a.createElement(g.a,{onSubmit:this.send},u.a.createElement("h5",null,0===n||s?c("Login.Se connecter","Se connecter"):1===n?c("Login.Se cr\xe9er un compte","Se cr\xe9er un compte"):"Votre code de confirmation"),u.a.createElement("div",{className:"texte-small mb-12"},0===n?c("Login.Ou se cr\xe9er un compte","Ou se cr\xe9er un compte"):s&&1===n?c("Login.Content de vous revoir !","Content de vous revoir !"):1===n?c("Login.Pas besoin d\u2019email","Pas besoin d\u2019email"):"Nous vous avons envoy\xe9 un SMS \xe0 votre num\xe9ro"),u.a.createElement(F.CSSTransition,{in:!0,appear:!0,timeout:600,classNames:"example"},0===n?u.a.createElement(J,{value:a,onChange:this.handleChange,step:n,key:"username-field",t:c}):1===n?u.a.createElement(u.a.Fragment,null,u.a.createElement(R,{id:"password",placeholder:"Mot de passe",value:this.state.password,onChange:this.handleChange,passwordVisible:t,onClick:this.togglePasswordVisibility,userExists:s,t:c}),1===n&&!s&&u.a.createElement(R,{id:"cpassword",placeholder:"Confirmez le mot de passe",value:this.state.cpassword,onChange:this.handleChange,passwordVisible:t,onClick:this.togglePasswordVisibility,t:c})):u.a.createElement(U,{value:r,onChange:this.handleChange,key:"code-field"})),1===n&&u.a.createElement(Y,{value:this.state.password,upcoming:this.upcoming,t:c,userExists:s,resetPassword:this.resetPassword})))),u.a.createElement(y.a,{to:"/"},u.a.createElement(M.a,{type:"outline",name:"corner-up-left-outline",className:"retour-btn"},c("Login.Retour \xe0 l'accueil","Retour \xe0 l'accueil")))),u.a.createElement(q,{show:o,email:i,phone:l,toggle:this.toggleModal,send:this.send,onChange:this.handleChange}))}}]),t}(c.Component),J=function(e){return u.a.createElement("div",{key:"username-field"},u.a.createElement(D.a,Object.assign({prepend:!0,prependName:"person-outline"},e,{id:"username",type:"username",placeholder:e.t("Login.Pseudonyme","Pseudonyme"),autoComplete:"username"})),u.a.createElement("div",{className:"footer-buttons"},u.a.createElement(M.a,{type:"dark",name:"arrow-forward-outline",color:"dark",className:"connect-btn",disabled:!e.value},e.t("Suivant","Suivant"))))},R=function(e){var t=j()(e.value);return u.a.createElement(u.a.Fragment,null,u.a.createElement(D.a,Object.assign({prepend:!0,append:!0,autoFocus:"password"===e.id,prependName:"lock-outline",appendName:e.passwordVisible?"eye-off-2-outline":"eye-outline",inputClassName:"password-input",onAppendClick:e.onClick},e,{type:e.passwordVisible?"text":"password",id:e.id,placeholder:e.placeholder&&e.t("Login."+e.placeholder,e.placeholder),autoComplete:"new-password"})),"password"===e.id&&!e.userExists&&e.value&&u.a.createElement("div",{className:"score-wrapper mb-10"},u.a.createElement("span",{className:"mr-10"},e.t("Login.Force","Force")," :"),u.a.createElement(f.a,{color:Object(T.a)(t.score/4),value:100*(.1+t.score/4)/1.1})))},Y=function(e){return u.a.createElement("div",{className:"footer-buttons"},e.userExists&&u.a.createElement(E.a,{type:"button",color:"transparent",className:"mr-10 password-btn",onClick:e.resetPassword},u.a.createElement("u",null,e.t("Login.Mot de passe oubli\xe9 ?","Mot de passe oubli\xe9 ?"))),u.a.createElement(M.a,{type:"dark",name:"log-in",color:"dark",className:"connect-btn",disabled:!e.value},e.t("Connexion","Connexion")))},z=function(e){return u.a.createElement(m.a,{className:"card-login header-card cursor-pointer",onClick:e.goBack},u.a.createElement(h.a,null,u.a.createElement(B.a,{name:"corner-up-left-outline",fill:H.a.noir,className:"mr-20"}),u.a.createElement("span",null,e.t("Login.no-account","Il n'existe pas de compte \xe0 ce nom"),". ")))},U=function(e){return u.a.createElement("div",{key:"code-field"},u.a.createElement(D.a,Object.assign({prepend:!0,prependName:"lock-outline"},e,{id:"code",type:"number",placeholder:"code"})),u.a.createElement("div",{className:"footer-buttons"},u.a.createElement(M.a,{type:"dark",name:"arrow-forward-outline",color:"dark",className:"connect-btn",disabled:!e.value},"Valider")))},q=function(e){return u.a.createElement(A.a,Object.assign({className:"info-modal",modalHeader:"Vos informations de compte"},e),u.a.createElement(w.a,null,u.a.createElement(D.a,Object.assign({prepend:!0,prependName:"at-outline",value:e.email},e,{id:"email",type:"email",placeholder:"Email"})),u.a.createElement(D.a,Object.assign({prepend:!0,prependName:"phone-call-outline",value:e.phone},e,{id:"phone",type:"phone",placeholder:"T\xe9l\xe9phone : 06 11 22 33 44"}))),u.a.createElement(b.a,null,u.a.createElement(M.a,{type:"light-action",onClick:e.toggle,className:"mr-10"},"Annuler"),u.a.createElement(M.a,{type:"validate",name:"checkmark",onClick:e.send},"Valider")))},G={fetch_user:P.fetch_user};t.default=p()({page:"Login"},{dispatchOnMount:!0})(Object(k.b)(null,G)(Object(N.b)()(I)))}}]);
//# sourceMappingURL=6.d2b2d082.chunk.js.map