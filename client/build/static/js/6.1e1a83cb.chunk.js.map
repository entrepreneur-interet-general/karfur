{"version":3,"sources":["containers/Login/Login.scss","containers/Login/Login.js"],"names":["module","exports","lightColor","darkColor","cardColor","blanc","rouge","vert","noir","gris","violet","focus","grisFonce","noirCD","blancSimple","jauneClair","attention","validation","validationHover","error","erreur","uiattention","standby","orange","Login","_Component","_getPrototypeOf2","_this","Object","_Users_lamazing_Work_refugies_info_karfur_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_1__","this","_len","arguments","length","args","Array","_key","_Users_lamazing_Work_refugies_info_karfur_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_3__","_Users_lamazing_Work_refugies_info_karfur_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_4__","call","apply","concat","state","username","password","cpassword","code","email","phone","authy_id","traducteur","passwordVisible","redirectTo","step","userExists","usernameHidden","showModal","cannyRedirect","togglePasswordVisibility","setState","pS","toggleModal","goBack","resetPassword","API","reset_password","then","data","Swal","fire","title","text","type","send","e","preventDefault","timer","checkUserExists","status","passwdCheck","score","user","login","token","_this$state","window","location","assign","indexOf","props","history","push","localStorage","setItem","setAuthToken","fetch_user","catch","response","_","get","console","log","handleChange","event","_Users_lamazing_Work_refugies_info_karfur_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","target","id","value","upcoming","_Users_lamazing_Work_refugies_info_karfur_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_5__","_Users_lamazing_Work_refugies_info_karfur_client_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_2__","key","locState","qParam","querySearch","search","redirect","isAuth","decodeURIComponent","getItem","scrollTo","_this$state2","t","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","RegisterHeader","reactstrap__WEBPACK_IMPORTED_MODULE_8__","reactstrap__WEBPACK_IMPORTED_MODULE_9__","reactstrap__WEBPACK_IMPORTED_MODULE_10__","onSubmit","react_transition_group__WEBPACK_IMPORTED_MODULE_17__","in","appear","timeout","classNames","UsernameField","onChange","Fragment","PasswordField","placeholder","onClick","CodeField","PasswordFooter","react_router_dom__WEBPACK_IMPORTED_MODULE_16__","to","_components_FigmaUI_FButton_FButton__WEBPACK_IMPORTED_MODULE_25__","name","InfoModal","show","toggle","Component","_components_FigmaUI_FInput_FInput__WEBPACK_IMPORTED_MODULE_27__","prepend","prependName","autoComplete","color","disabled","password_check","append","autoFocus","appendName","inputClassName","onAppendClick","reactstrap__WEBPACK_IMPORTED_MODULE_11__","colorAvancement","reactstrap__WEBPACK_IMPORTED_MODULE_12__","_components_UI_EVAIcon_EVAIcon__WEBPACK_IMPORTED_MODULE_26__","fill","variables","_components_Modals_Modal__WEBPACK_IMPORTED_MODULE_29__","modalHeader","reactstrap__WEBPACK_IMPORTED_MODULE_13__","reactstrap__WEBPACK_IMPORTED_MODULE_14__","mapDispatchToProps","track","page","dispatchOnMount","connect","withTranslation"],"mappings":"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","file":"static/js/6.1e1a83cb.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"lightColor\":\"#F2F2F2\",\"darkColor\":\"#212121\",\"cardColor\":\"#828282\",\"blanc\":\"#FBFBFB\",\"rouge\":\"#E55039\",\"vert\":\"#2CA12A\",\"noir\":\"#212121\",\"gris\":\"#F2F2F2\",\"violet\":\"#583F93\",\"focus\":\"#2D9CDB\",\"grisFonce\":\"#828282\",\"noirCD\":\"#CDCDCD\",\"blancSimple\":\"#FFFFFF\",\"jauneClair\":\"#FFF7AE\",\"attention\":\"#F9EF99\",\"validation\":\"#DEF6C2\",\"validationHover\":\"#4CAF50\",\"error\":\"#F44336\",\"erreur\":\"#FFCECB\",\"uiattention\":\"#FFEB3B\",\"standby\":\"#FDD497\",\"orange\":\"#FF9800\"};","import React, { Component } from 'react';\nimport track from 'react-tracking';\nimport { Button, Card, CardBody, Form, ModalBody, ModalFooter, Progress } from 'reactstrap';\nimport Swal from 'sweetalert2';\nimport {NavLink} from 'react-router-dom';\nimport { CSSTransition } from 'react-transition-group';\nimport { connect } from 'react-redux';\nimport { withTranslation } from 'react-i18next';\nimport _ from \"lodash\";\nimport passwdCheck from \"zxcvbn\";\nimport querySearch from \"stringquery\";\n\nimport API from '../../utils/API';\nimport setAuthToken from '../../utils/setAuthToken';\n// import FCBtn from '../../assets/FCboutons-10.png';\nimport FButton from '../../components/FigmaUI/FButton/FButton';\nimport EVAIcon from '../../components/UI/EVAIcon/EVAIcon';\nimport FInput from '../../components/FigmaUI/FInput/FInput';\nimport {fetch_user} from \"../../Store/actions\";\nimport Modal from '../../components/Modals/Modal';\nimport { colorAvancement } from '../../components/Functions/ColorFunctions';\n\nimport './Login.scss';\nimport variables from 'scss/colors.scss';\n\nexport class Login extends Component {\n  state = {\n    username : \"\",\n    password: \"\",\n    cpassword: \"\",\n    code: \"\",\n    email: \"\",\n    phone: \"\",\n    authy_id: \"\",\n    traducteur : false,\n    passwordVisible:false,\n    redirectTo : \"/\",\n    step: 0,\n    userExists: false,\n    usernameHidden:false,\n    showModal:false,\n    cannyRedirect: false\n  }\n\n  componentDidMount(){\n    const locState = this.props.location.state ;\n    const qParam=querySearch(this.props.location.search).redirect;\n    if(API.isAuth()){\n      if(qParam){\n        const redirectTo = decodeURIComponent(qParam);\n        return window.location.assign( redirectTo + (redirectTo.indexOf('?') === -1 ? '?' : '&') + 'ssoToken=' + localStorage.getItem('token') );\n      }else{\n        return this.props.history.push(\"/\")\n      }\n    }\n    if(locState){ this.setState({traducteur: locState.traducteur, redirectTo: locState.redirectTo || \"/\"}); }\n    if(qParam) { this.setState({cannyRedirect: true, redirectTo: decodeURIComponent(qParam) }) }\n    window.scrollTo(0, 0);\n  }\n\n  togglePasswordVisibility = () => this.setState(pS=>({passwordVisible: !pS.passwordVisible}))\n  toggleModal = () => this.setState(pS=>({showModal: !pS.showModal}))\n\n  goBack = () => this.setState({step: 0, userExists: false, password:\"\", cpassword: \"\"});\n\n  resetPassword = () => {\n    API.reset_password({username: this.state.username}).then(data => {\n      Swal.fire( {title: 'Yay...', text: 'Le mot de passe de récupération a été envoyé à l\\'adresse mail renseignée lors de la création du compte', type: 'success'} )\n    })\n  }\n\n  send = (e) => {\n    e.preventDefault();\n    if(this.state.step === 0){\n      if(this.state.username.length === 0){\n        Swal.fire( {title: 'Oops...', text: 'Aucun nom d\\'utilisateur n\\'est renseigné !', type: 'error', timer: 1500});return;\n      }\n      API.checkUserExists({'username' : this.state.username}).then(data => {\n        this.setState({userExists: data.status === 200, step: 1});\n      })\n    }else{\n      if(this.state.password.length === 0){\n        return Swal.fire( {title: 'Oops...', text: 'Aucun mot de passe n\\'est renseigné !', type: 'error', timer: 1500});\n      }\n      if(!this.state.userExists && this.state.password !== this.state.cpassword){\n        return Swal.fire( {title: 'Oops...', text: 'Les mots de passes ne correspondent pas !', type: 'error', timer: 1500});\n      }\n      if(!this.state.userExists && (passwdCheck(this.state.password) || {}).score < 1){\n        return Swal.fire( {title: 'Oops...', text: 'Le mot de passe est trop faible', type: 'error', timer: 1500});\n      }\n      const user = {\n        username : this.state.username,\n        password : this.state.password,\n        cpassword : this.state.cpassword,\n        traducteur : this.state.traducteur,\n        code: this.state.code,\n        email: this.state.email,\n        phone: this.state.phone,\n      }\n      API.login(user).then(data => {\n        const token = data.data.token, {cannyRedirect, redirectTo}= this.state;\n        Swal.fire( {title: 'Yay...', text: 'Authentification réussie !', type: 'success', timer: 1500} ).then(()=>{\n          if(cannyRedirect){\n            return window.location.assign(\n              redirectTo + (redirectTo.indexOf('?') === -1 ? '?' : '&') + 'ssoToken=' + token\n            );\n          }else{\n            return this.props.history.push(redirectTo)\n          }\n        });\n        localStorage.setItem('token', token);\n        if(!cannyRedirect){\n          setAuthToken(token);\n          this.props.fetch_user();\n        }\n      }).catch(e => {\n        if(e.response.status === 501){\n          this.setState({showModal: false, step: 2});\n        }else if(e.response.status === 502){\n          this.setState({showModal: true, phone: _.get(e,\"response.data.phone\", \"\"), email: _.get(e,\"response.data.email\", \"\") });\n        }else{console.log(e.response)}\n      })\n    }\n  }    \n\n  handleChange = event => this.setState({ [event.target.id]: event.target.value });\n\n  upcoming = () => Swal.fire( {title: 'Oh non!', text: 'Cette fonctionnalité n\\'est pas encore disponible', type: 'error', timer: 1500 })\n\n  render() {\n    const {passwordVisible, username, step, userExists, code, showModal, email, phone} = this.state;\n    const { t } = this.props;\n    return (\n      <div className=\"app flex-row align-items-center login\">\n        <div className=\"login-wrapper\">\n          {step === 1 && !userExists && \n            <RegisterHeader goBack={this.goBack} t={t} /> }\n          <Card className=\"card-login main-card\">\n            <CardBody>\n              <Form onSubmit={this.send}>\n                <h5>\n                  {step === 0 || userExists ? \n                    t(\"Login.Se connecter\", \"Se connecter\") : \n                    step === 1 ? t(\"Login.Se créer un compte\", \"Se créer un compte\") :\n                    \"Votre code de confirmation\"}\n                </h5>\n                <div className=\"texte-small mb-12\">\n                  {step === 0 ? \n                    t(\"Login.Ou se créer un compte\", \"Ou se créer un compte\") : \n                      (userExists && step === 1 ? t(\"Login.Content de vous revoir !\", \"Content de vous revoir !\") : \n                        step === 1 ? t(\"Login.Pas besoin d’email\", \"Pas besoin d’email\") : \"Nous vous avons envoyé un SMS à votre numéro\")}\n                </div>\n                <CSSTransition\n                  in={true} \n                  appear={true} \n                  timeout={600} \n                  classNames=\"example\"\n                >\n                  {step===0 ? \n                    <UsernameField value={username} onChange={this.handleChange} step={step} key=\"username-field\" t={t}/> :\n                    step === 1 ?\n                      <>\n                        <PasswordField \n                          id=\"password\"\n                          placeholder=\"Mot de passe\"\n                          value={this.state.password} \n                          onChange={this.handleChange} \n                          passwordVisible={passwordVisible}\n                          onClick={this.togglePasswordVisibility}\n                          userExists={userExists}\n                          t={t} />\n                        {step === 1 && !userExists &&\n                          <PasswordField \n                            id=\"cpassword\"\n                            placeholder=\"Confirmez le mot de passe\"\n                            value={this.state.cpassword} \n                            onChange={this.handleChange} \n                            passwordVisible={passwordVisible}\n                            onClick={this.togglePasswordVisibility}\n                            t={t} />}\n                      </> : \n                      <CodeField value={code} onChange={this.handleChange} key=\"code-field\"/>}\n                </CSSTransition>\n                \n                {step === 1 &&\n                  <PasswordFooter value={this.state.password} upcoming={this.upcoming} t={t} userExists={userExists} resetPassword={this.resetPassword} />}\n              </Form>\n            </CardBody>\n          </Card>\n          {/* <Card className=\"card-login\">\n            <CardBody>\n              <div className=\"alt-login\">\n                <form action=\"/user/FClogin\" method=\"post\">\n                  <div className=\"field\">\n                    <label className=\"label\">\n                        Niveau eIDAS\n                        <span\n                          className=\"has-text-info tooltip is-tooltip-multiline\"\n                          data-tooltip=\"Vous pouvez dès à présent tester les identités de niveau faible (eidas1), substantiel (eidas2) et fort (eidas3) sur l'environnement de qualification. En production, vous n'aurez cependant accès pour l'instant qu'à des identités de niveau faible (eidas1).\" >\n                            (info)\n                        </span>\n                    </label>\n                    <div className=\"select\">\n                      <select name=\"eidasLevel\">\n                        <option value=\"eidas1\">Défaut : Faible (eidas1)</option>\n                        <option value=\"eidas2\">Substantiel (eidas2)</option>\n                        <option value=\"eidas3\">Fort (eidas3)</option>\n                      </select>\n                    </div>\n                  </div>\n                  <div className=\"field\">\n                    <input type=\"image\" src={FCBtn} alt=\"Soumettre\"/>\n                  </div>\n                </form>\n              </div>\n            </CardBody>\n          </Card> */}\n          <NavLink to=\"/\">\n            <FButton type=\"outline\" name=\"corner-up-left-outline\" className=\"retour-btn\">\n              {t(\"Login.Retour à l'accueil\", \"Retour à l'accueil\")}\n            </FButton>\n          </NavLink>\n        </div>\n\n        <InfoModal \n          show={showModal} \n          email={email}\n          phone={phone}\n          toggle={this.toggleModal} \n          send={this.send} \n          onChange={this.handleChange} \n        />\n      </div>\n    );\n  }\n}\n\nconst UsernameField = props => (\n  <div key=\"username-field\">\n    <FInput\n      prepend\n      prependName=\"person-outline\"\n      {...props}\n      id=\"username\" type=\"username\" placeholder={props.t(\"Login.Pseudonyme\", \"Pseudonyme\")} autoComplete=\"username\" />\n    <div className=\"footer-buttons\">\n      <FButton type=\"dark\" name=\"arrow-forward-outline\" color=\"dark\" className=\"connect-btn\" disabled={!props.value}>\n        {props.t(\"Suivant\", \"Suivant\")}\n      </FButton>\n    </div>\n  </div>\n)\n\nconst PasswordField = props => {\n  const password_check = passwdCheck(props.value);\n  return (<>\n    <FInput\n      prepend append \n      autoFocus={props.id===\"password\"}\n      prependName=\"lock-outline\"\n      appendName={props.passwordVisible ? \"eye-off-2-outline\" : \"eye-outline\"}\n      inputClassName=\"password-input\"\n      onAppendClick={props.onClick}\n      {...props}\n      type={props.passwordVisible ? \"text\" : \"password\"} id={props.id} \n      placeholder={props.placeholder && props.t(\"Login.\" + props.placeholder, props.placeholder)} autoComplete=\"new-password\" />\n    {props.id===\"password\" && !props.userExists && props.value && \n      <div className=\"score-wrapper mb-10\">\n        <span className=\"mr-10\">{props.t(\"Login.Force\", \"Force\")} :</span>\n        <Progress \n          color={colorAvancement(password_check.score/4)} \n          value={(0.1+(password_check.score/4))*100/1.1} \n        />\n      </div>}\n  </>)\n}\n\nconst PasswordFooter = props => (\n  <div className=\"footer-buttons\">\n    {props.userExists &&\n      <Button type=\"button\" color=\"transparent\" className=\"mr-10 password-btn\" onClick={props.resetPassword}>\n        <u>{props.t(\"Login.Mot de passe oublié ?\", \"Mot de passe oublié ?\")}</u>\n      </Button>}\n    <FButton type=\"dark\" name=\"log-in\" color=\"dark\" className=\"connect-btn\" disabled={!props.value}>\n      {props.t(\"Connexion\", \"Connexion\")}\n    </FButton>\n  </div>\n)\n\nconst RegisterHeader = props => (\n  <Card className=\"card-login header-card cursor-pointer\" onClick={props.goBack}>\n    <CardBody>\n      <EVAIcon name=\"corner-up-left-outline\" fill={variables.noir} className=\"mr-20\" />\n      <span>{props.t(\"Login.no-account\", \"Il n'existe pas de compte à ce nom\")}. </span>\n    </CardBody>\n  </Card>\n)\n\nconst CodeField = props => (\n  <div key=\"code-field\">\n    <FInput\n      prepend\n      prependName=\"lock-outline\"\n      {...props}\n      id=\"code\" type=\"number\" placeholder=\"code\" />\n    <div className=\"footer-buttons\">\n      <FButton type=\"dark\" name=\"arrow-forward-outline\" color=\"dark\" className=\"connect-btn\" disabled={!props.value}>\n        Valider\n      </FButton>\n    </div>\n  </div>\n);\n\nconst InfoModal = props => (\n  <Modal\n    className=\"info-modal\" \n    modalHeader = \"Vos informations de compte\"\n    {...props}\n  >\n    <ModalBody>\n      <FInput\n        prepend\n        prependName=\"at-outline\"\n        value={props.email}\n        {...props}\n        id=\"email\" type=\"email\" placeholder=\"Email\" />\n      <FInput\n        prepend\n        prependName=\"phone-call-outline\"\n        value={props.phone}\n        {...props}\n        id=\"phone\" type=\"phone\" placeholder=\"Téléphone : 06 11 22 33 44\" />\n    </ModalBody>\n    <ModalFooter>\n      <FButton type=\"light-action\" onClick={props.toggle} className=\"mr-10\">\n        Annuler\n      </FButton>\n      <FButton type=\"validate\" name=\"checkmark\" onClick={props.send}>\n        Valider\n      </FButton>\n    </ModalFooter>\n  </Modal>\n)\n\nconst mapDispatchToProps = {fetch_user};\n\nexport default track({\n  page: 'Login',\n}, { dispatchOnMount: true })(\n  connect(null, mapDispatchToProps)(\n    withTranslation()(Login)\n  )\n);\n"],"sourceRoot":""}