(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{1439:function(e,a,t){},1440:function(e,a,t){},1441:function(e,a,t){e.exports={lightColor:"#F2F2F2",darkColor:"#212121",cardColor:"#828282",blanc:"#FBFBFB",rouge:"#E55039",vert:"#2CA12A",noir:"#212121",gris:"#F2F2F2",violet:"#583F93",focus:"#2D9CDB",grisFonce:"#828282",noirCD:"#CDCDCD",blancSimple:"#FFFFFF",jauneClair:"#FFF7AE",attention:"#F9EF99",validation:"#DEF6C2",validationHover:"#4CAF50",error:"#F44336",erreur:"#FFCECB",uiattention:"#FFEB3B",standby:"#FDD497",orange:"#FF9800"}},1442:function(e,a,t){e.exports={lightColor:"#F2F2F2",darkColor:"#212121",cardColor:"#828282",blanc:"#FBFBFB",rouge:"#E55039",vert:"#2CA12A",noir:"#212121",gris:"#F2F2F2",violet:"#583F93",focus:"#2D9CDB",grisFonce:"#828282",noirCD:"#CDCDCD",blancSimple:"#FFFFFF",jauneClair:"#FFF7AE",attention:"#F9EF99",validation:"#DEF6C2",validationHover:"#4CAF50",error:"#F44336",erreur:"#FFCECB",uiattention:"#FFEB3B",standby:"#FDD497",orange:"#FF9800"}},1443:function(e,a,t){},1444:function(e,a,t){},1445:function(e,a,t){},1446:function(e,a,t){e.exports={lightColor:"#F2F2F2",darkColor:"#212121",cardColor:"#828282",blanc:"#FBFBFB",rouge:"#E55039",vert:"#2CA12A",noir:"#212121",gris:"#F2F2F2",violet:"#583F93",focus:"#2D9CDB",grisFonce:"#828282",noirCD:"#CDCDCD",blancSimple:"#FFFFFF",jauneClair:"#FFF7AE",attention:"#F9EF99",validation:"#DEF6C2",validationHover:"#4CAF50",error:"#F44336",erreur:"#FFCECB",uiattention:"#FFEB3B",standby:"#FDD497",orange:"#FF9800"}},1447:function(e,a,t){},1448:function(e,a,t){},1449:function(e,a,t){},1450:function(e,a,t){},1451:function(e,a,t){e.exports={lightColor:"#F2F2F2",darkColor:"#212121",cardColor:"#828282",blanc:"#FBFBFB",rouge:"#E55039",vert:"#2CA12A",noir:"#212121",gris:"#F2F2F2",violet:"#583F93",focus:"#2D9CDB",grisFonce:"#828282",noirCD:"#CDCDCD",blancSimple:"#FFFFFF",jauneClair:"#FFF7AE",attention:"#F9EF99",validation:"#DEF6C2",validationHover:"#4CAF50",error:"#F44336",erreur:"#FFCECB",uiattention:"#FFEB3B",standby:"#FDD497",orange:"#FF9800"}},1452:function(e,a,t){},1465:function(e,a,t){"use strict";t.r(a);var n=t(16),r=t(2),o=t(11),i=t(15),l=t(13),s=t(12),c=t(14),u=t(23),m=t(0),d=t.n(m),g=t(702),p=t(20),f=t(649),h=t(270),E=t(391),v=t(141),F=t.n(v),b=t(24),C=t.n(b),N=t(32),k=t(139),D=t.n(k),w=t(392),O=t(1418),j=t(1412),y=t(1413),A=t(1419),S=(t(648),t(225)),x=t(115),T=t.n(x),_=t(62),B=(t(1439),t(7)),M=t(645),L=t(42),H=t.n(L),I=t(41),q=(t(1440),function(){return d.a.createElement(S.a,{to:"/",className:"logo mr-10"},d.a.createElement("img",{src:I.q,className:"logo-img",alt:"logo refugies-info"}))}),P=t(9),R=(t(1441),{toggle_lang_modal:_.toggle_lang_modal}),U=Object(p.b)()(Object(N.b)(function(e){return{languei18nCode:e.langue.languei18nCode,langues:e.langue.langues}},R)(function(e){var a=(e.langues||[]).find(function(a){return a.i18nCode===e.i18n.language})||{},t=e.langues.length>0&&a?a.langueCode:"fr";return d.a.createElement(P.a,{type:"outline-black",className:"language-btn mr-10",onClick:e.toggle_lang_modal},d.a.createElement("i",{className:"flag-icon flag-icon-"+t,title:t,id:t}),!e.hideText&&d.a.createElement("span",{className:"ml-10 language-name"},a.langueLoc||"Langue"))})),V=t(140),z=t(6),J=t(96),Q=(t(1442),t(4)),W=t.n(Q),Y=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(l.a)(this,(e=Object(s.a)(a)).call.apply(e,[this].concat(r)))).state={dropdownOpen:!1},t.disconnect=function(){B.a.logout(),t.props.fetch_user()},t.toggle=function(){return t.setState(function(e){return{dropdownOpen:!e.dropdownOpen}})},t.navigateTo=function(e){return t.props.history.push(e)},t}return Object(c.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this,a=this.props.location.pathname||"",t=this.props,n=t.user,r=t.contributeur,o=t.traducteur,i=t.expertTrad,l=t.admin,s=t.membreStruct,c=t.t,u=t.windowWidth,m=(a.includes("/traduction"),(n.picture||{}).secure_url||H.a);return d.a.createElement("header",{className:"Toolbar"},d.a.createElement("div",{className:"left_buttons"},!1,d.a.createElement(q,{reduced:u<J.a.phoneDown}),"/"!==a&&"/homepage"!==a&&u>=J.a.phoneDown&&d.a.createElement(S.a,{to:"/",className:"home-btn"},d.a.createElement(z.a,{name:"home",fill:W.a.noir,className:"mr-10 rsz"}),u>=J.a.lgLimit&&d.a.createElement("b",{className:"home-texte"},c("Toolbar.Accueil","Accueil")))),d.a.createElement("div",{className:"center-buttons"},d.a.createElement(M.a,null),d.a.createElement(U,{hideText:u<J.a.tabletUp}),d.a.createElement(V.b,{loupe:!0,className:"search-bar inner-addon right-addon mr-10 rsz"}),d.a.createElement(P.a,{type:"dark",name:"grid",className:"mr-10 rsz",tag:S.a,to:"/advanced-search"},u>=J.a.tabletUp&&c("Toolbar.Tout voir","Tout voir")),B.a.isAuth()?d.a.createElement(O.a,{className:"user-dropdown",isOpen:this.state.dropdownOpen,toggle:this.toggle},d.a.createElement(j.a,{color:"transparent"},d.a.createElement("img",{src:m,className:"user-picture",alt:"user"}),d.a.createElement("div",{className:"user-badge"})),d.a.createElement(y.a,null,d.a.createElement(A.a,{onClick:function(){return e.navigateTo("/backend/user-profile")}},c("Toolbar.Mon profil","Mon profil")),r&&d.a.createElement(A.a,{onClick:function(){return e.navigateTo("/backend/user-dash-contrib")}},c("Toolbar.Espace r\xe9daction","Espace r\xe9daction")),(i||o)&&d.a.createElement(A.a,{onClick:function(){return e.navigateTo("/backend/user-dashboard")}},c("Toolbar.Espace traduction","Espace traduction")),s&&d.a.createElement(A.a,{onClick:function(){return e.navigateTo("/backend/user-dash-structure")}},c("Toolbar.Ma structure","Ma structure")),l&&d.a.createElement(A.a,{onClick:function(){return e.navigateTo("/backend/admin")}},c("Toolbar.Administration","Administration")),d.a.createElement(A.a,{divider:!0}),d.a.createElement(S.a,{to:"/",onClick:this.disconnect},d.a.createElement(A.a,{className:"text-danger"},c("Toolbar.Se d\xe9connecter","Se d\xe9connecter"))))):d.a.createElement(S.a,{to:{pathname:"/login",state:{redirectTo:"/backend/user-profile"}}},d.a.createElement(P.a,{type:"outline-black",className:"connect-btn",name:u<J.a.tabletUp&&"log-in-outline",fill:W.a.noir},u>=J.a.tabletUp&&c("Toolbar.Connexion","Connexion")))),!1)}}]),a}(d.a.Component),Z={toggle_lang_modal:_.toggle_lang_modal,fetch_user:_.fetch_user},$=C()({component:"Toolbar"})(Object(w.a)(Object(N.b)(function(e){return{languei18nCode:e.langue.languei18nCode,langues:e.langue.langues,dispositifs:e.dispositif.dispositifs,user:e.user.user,traducteur:e.user.traducteur,expertTrad:e.user.expertTrad,contributeur:e.user.contributeur,admin:e.user.admin,membreStruct:e.user.membreStruct}},Z)(Object(p.b)()(T()(Y))))),G=(t(1443),function(e){return e.show?d.a.createElement("div",{className:"Backdrop",onClick:e.clicked}):null}),K=(t(1444),function(e){return d.a.createElement("li",{className:"NavigationItem"},d.a.createElement(S.a,{to:e.link,onClick:e.closed,exact:!0},e.children))}),X=t(700),ee=(t(1445),function(){var e=X.default.filter(function(e){return"/dispositifs"===e.path});return d.a.createElement("ul",{className:"NavigationItems"},e.map(function(e,a){return d.a.createElement(K,{key:a,link:e.path,active:1===a},e.name)}))}),ae=(t(1446),function(e){return d.a.createElement(S.a,{exact:!0,to:e.link,onClick:e.closed,className:"backend-navgation-wrapper"},d.a.createElement("li",{className:"BackendNavigationItem"},e.children))}),te=(t(1447),function(e){return d.a.createElement("ul",{className:"BackendNavigationItems"},X.default.map(function(a,t){return a.path.includes("backend")&&a.path.includes("admin")&&d.a.createElement(ae,Object.assign({key:t,link:a.path,active:1===t},e),a.name)}))}),ne=(t(1448),Object(w.a)(function(e){var a=["SideDrawer","Close","HideSideDrawer"];e.open&&(a=["SideDrawer","Open","HideSideDrawer"]);var t=e.location.pathname;return t.includes("/backend")&&a.splice(2),d.a.createElement("div",{className:a.join(" ")},d.a.createElement(q,null),d.a.createElement("nav",null,!t.includes("/backend")&&d.a.createElement(ee,e),t.includes("/backend")&&d.a.createElement(te,e)))})),re=t(1426),oe=t(131),ie=t(701),le=t.n(ie),se=t(441),ce=t(285),ue=t.n(ce),me=(t(1449),new Array(6).fill({text:"Ad fugiat amet mollit quis do eiusmod duis cillum velit.",from:{username:"Soufiane"},created_at:"2019-03-15T11:50:37.877Z"})),de=function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,i=new Array(n),c=0;c<n;c++)i[c]=arguments[c];return(t=Object(l.a)(this,(e=Object(s.a)(a)).call.apply(e,[this].concat(i)))).state={messages:me.map(function(e){return Object(r.a)({},e,{isMe:Math.random()>=.5})}),message:"",urlId:"",locale:"",path:""},t.handleChange=function(e){t.setState({message:e.target.value})},t.sendMessage=function(e,a){B.b.emit(a+":sendMessage",e)},t.submitChat=function(){if(t.state.message){var e={message:t.state.message,itemId:t.state.urlId,itemName:"traduction",filter:t.state.locale,path:t.state.path,type:"sidechat"};B.a.add_channel(e).then(function(e){t.sendMessage(e.data.data,"client"),t.setState({message:""})})}},t.scrollToBottom=function(){t.messagesEnd.scrollIntoView({behavior:"smooth"})},t}return Object(c.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){var e,a,t=this,n=Object(se.a)(this.props.location.pathname,{path:"/traduction/:id"});if(n&&n.params&&n.params.id){try{a=this.props.location.state.langue.i18nCode,this.setState({locale:a})}catch(r){console.log(r)}e=n.params.id,this.setState({urlId:e,path:this.props.location.pathname}),B.a.get_channel({itemId:e,itemName:"traduction",filter:a||{$exists:!1}}).then(function(e){var a=e.data.data[0];a&&(t.setState({messages:a.messages}),t.scrollToBottom())}),B.b.on("MessageSent",function(e){console.log(e),"sidechat"===e.type&&t.setState({messages:e.messages})})}}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"render",value:function(){var e=this;return d.a.createElement(re.a,{tabId:"2",className:"p-3 right-side-drawer"},d.a.createElement(oe.a,{className:"chat-content"},d.a.createElement("ul",null,this.state.messages.map(function(e,a){return d.a.createElement("li",{key:a},d.a.createElement("div",{className:"msj"+(e.isMe?"":"-rta")+" macro"},e.isMe&&d.a.createElement("div",{className:"avatar"},d.a.createElement("img",{className:"img-circle",src:ue.a,alt:"avatar"})),d.a.createElement("div",{className:"text text-"+(e.isMe?"l":"r")},d.a.createElement("b",null,(e.from||{}).username),d.a.createElement("p",null,e.text),d.a.createElement("p",null,d.a.createElement("small",null,le.a.utc(e.created_at).fromNow()))),!e.isMe&&d.a.createElement("div",{className:"avatar not-me"},d.a.createElement("img",{className:"img-circle",src:ue.a,alt:"avatar"}))))}),d.a.createElement("li",{style:{float:"left",clear:"both"},ref:function(a){e.messagesEnd=a}}))),d.a.createElement(oe.a,{className:"chat-footer"},d.a.createElement("div",{className:"macro input-wrapper"},d.a.createElement("div",{className:"text-wrapper"},d.a.createElement("textarea",{rows:"1",className:"form-control type_msg",placeholder:"Votre message...",value:this.state.message,onChange:this.handleChange}))),d.a.createElement("div",{className:"send-wrapper",onClick:this.submitChat},d.a.createElement("span",{className:"fa fa-share share-icon"}))))}}]),a}(d.a.Component),ge=Object(N.b)(function(e){return{messages:e.messages,message:e.message}})(Object(w.a)(de)),pe=(t(1450),function(e){var a="left"===e.side?d.a.createElement(ne,e):d.a.createElement(ge,e);return d.a.createElement(d.a.Fragment,null,d.a.createElement(G,{show:e.open,clicked:e.closed}),a)}),fe=t(410),he=t(644),Ee=t(116),ve=t(65),Fe=t(1422),be=t(694),Ce=t(1408),Ne=t(699),ke=t(21),De=t.n(ke),we=(t(1451),function(e){function a(){var e,t;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=Object(l.a)(this,(e=Object(s.a)(a)).call.apply(e,[this].concat(r)))).state={email:""},t.onChange=function(e){return t.setState({email:e.target.value})},t.sendMail=function(e){e.preventDefault(),t.state.email?B.a.set_mail({mail:t.state.email}).then(function(){De.a.fire({title:"Yay...",text:"Mail correctement enregistr\xe9 !",type:"success",timer:1500}),t.setState({email:""})}).catch(function(e){return De.a.fire("Oh non...","Une erreur s'est produite","error")}):De.a.fire({title:"Oops...",text:"Aucun mail renseign\xe9",type:"error",timer:1500})},t.upcoming=function(){return De.a.fire({title:"Oh non!",text:"Cette fonctionnalit\xe9 n'est pas encore disponible",type:"error",timer:1500})},t}return Object(c.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this.props.t;return d.a.createElement("div",{className:"animated fadeIn footer"},d.a.createElement(oe.a,{className:"negative-margin"},d.a.createElement(ve.a,{xl:"4",lg:"4",md:"4",sm:"12",xs:"12",className:"mt-10"},d.a.createElement(Fe.a,{onSubmit:this.sendMail},d.a.createElement(be.a,null,d.a.createElement("div",{className:"position-relative"},d.a.createElement(Ce.a,{type:"email",name:"email",value:this.state.email,onChange:this.onChange,id:"emailNewsletter",placeholder:e("Footer.Je m'abonne \xe0 la newsletter","Je m'abonne \xe0 la newsletter")}),d.a.createElement(Ne.a,{addonType:"append",className:"icon-append",onClick:this.sendMail},d.a.createElement(z.a,{name:"at-outline",fill:W.a.noir}))))),d.a.createElement("div",{className:"ligne-footer"},d.a.createElement(P.a,{tag:"a",href:"https://refugies-info.mn.co",target:"_blank",rel:"noopener noreferrer",className:"footer-btn",type:"light-action",name:"people-outline",fill:W.a.noir},e("Footer.Participer \xe0 l'\xe9volution de r\xe9fugi\xe9s-info","Participer \xe0 l'\xe9volution de r\xe9fugi\xe9s.info"))),d.a.createElement("div",{className:"ligne-footer"},d.a.createElement(P.a,{tag:"a",href:"https://refugies.canny.io/",target:"_blank",rel:"noopener noreferrer",className:"footer-btn",type:"light-action",name:"plus-circle-outline",fill:W.a.noir},e("Footer.Demander des fonctionnalit\xe9s","Demander des fonctionnalit\xe9s"))),d.a.createElement("div",{className:"ligne-footer"},d.a.createElement(P.a,{tag:"a",href:"https://help.refugies.info/fr/",target:"_blank",rel:"noopener noreferrer",className:"footer-btn",type:"help",name:"question-mark-circle-outline",fill:W.a.noir},e("Footer.Centre d'aide","Centre d'aide")))),d.a.createElement(ve.a,{xl:"8",lg:"8",md:"8",sm:"12",xs:"12",className:"right-col mt-10"},d.a.createElement(oe.a,{className:"main-row negative-margin"},d.a.createElement(ve.a,{xl:"4",lg:"4",md:"4",sm:"4",xs:"12",className:"mt-10"},d.a.createElement("h5",{className:"footer-header"},e("Footer.Le projet","Le projet")),d.a.createElement("div",{className:"lien-footer"},d.a.createElement(Ee.NavHashLink,{to:"/qui-sommes-nous#hero"},e("Qui sommes-nous ?","Qui sommes-nous ?"))),d.a.createElement("div",{className:"lien-footer"},d.a.createElement(Ee.NavHashLink,{to:"/comment-contribuer#hero"},e("Comment contribuer ?","Comment contribuer ?"))),d.a.createElement("div",{className:"lien-footer"},d.a.createElement(S.a,{to:"/politique-de-confidentialite"},e("Politique de confidentialit\xe9","Politique de confidentialit\xe9"))),d.a.createElement("div",{className:"lien-footer"},d.a.createElement(S.a,{to:"/mentions-legales"},e("Mentions l\xe9gales","Mentions l\xe9gales")))),d.a.createElement(ve.a,{xl:"8",lg:"8",md:"8",sm:"8",xs:"12",className:"mt-10"},d.a.createElement("h5",{className:"footer-header"},e("Footer.Vous cherchez ?","Vous cherchez ?")),d.a.createElement("div",{className:"lien-footer"},d.a.createElement(S.a,{to:"/advanced-search"},e("Dispositif d'accompagnement","Dispositif d'accompagnement"))),d.a.createElement("div",{className:"lien-footer"},d.a.createElement(Ee.NavHashLink,{to:"/homepage#plan",smooth:!0},e("D\xe9marche administrative","D\xe9marche administrative"))),d.a.createElement("div",{className:"lien-footer"},d.a.createElement(Ee.NavHashLink,{to:"/homepage#plan",smooth:!0},e("Parcours personnalis\xe9","Parcours personnalis\xe9"))),d.a.createElement("div",{className:"lien-footer"},d.a.createElement(Ee.NavHashLink,{to:"/homepage#explique"},e("Lexique","Lexique"))))))))}}]),a}(m.Component)),Oe=C()({page:"Footer"})(Object(p.b)()(we));t(1452);t.d(a,"Layout",function(){return je});var je=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(l.a)(this,Object(s.a)(a).call(this,e))).state={showSideDrawer:{left:!1,right:!1},traducteur:!1},t.audio=new Audio,t.forceStopAudio=function(){t.audio.pause(),t.audio.currentTime=0},t.loading=function(){return d.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},t.sideDrawerClosedHandler=function(e){t.setState({showSideDrawer:Object(r.a)({},t.state.showSideDrawer,Object(n.a)({},e,!1))})},t.sideDrawerToggleHandler=function(e){t.setState(function(a){return{showSideDrawer:Object(r.a)({},t.state.showSideDrawer,Object(n.a)({},e,!a.showSideDrawer[e]))}})},t.changeLanguage=function(e){t.props.tracking.trackEvent({action:"click",label:"changeLanguage",value:e}),t.props.toggle_langue(e),t.props.i18n.getResourceBundle(e,"translation")?t.props.i18n.changeLanguage(e):console.log("Resource not found in i18next."),t.props.showLangModal&&t.props.toggle_lang_modal()},t.toggleHover=function(e){t.props.ttsActive&&(e.target&&e.target.firstChild&&e.target.firstChild.nodeValue?t.readAudio(e.target.firstChild.nodeValue,g.a.language):t.forceStopAudio())},t.readAudio=he.a.bind(Object(u.a)(Object(u.a)(t))),t}return Object(c.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.fetch_user(),this.props.fetch_dispositifs(),this.props.fetch_structures(),this.props.fetch_langues().then(function(){var a=D.a.get("languei18nCode");a&&"fr"!==a?e.changeLanguage(a):a||e.props.toggle_lang_modal()}),window.scrollTo(0,0)}},{key:"componentDidUpdate",value:function(e){e.ttsActive===this.props.ttsActive||this.props.ttsActive||this.forceStopAudio()}},{key:"componentWillReceiveProps",value:function(e){e.ttsActive===this.props.ttsActive||e.ttsActive||this.forceStopAudio()}},{key:"render",value:function(){var e=this,a=["ar","ps","fa"].includes(g.a.language);return d.a.createElement(F.a,{direction:a?v.DIRECTIONS.RTL:v.DIRECTIONS.LTR},d.a.createElement("div",{onMouseOver:this.toggleHover},d.a.createElement(m.Suspense,{fallback:this.loading()},d.a.createElement($,{drawerToggleClicked:this.sideDrawerToggleHandler})),d.a.createElement("div",{className:"app-body"},d.a.createElement(pe,{side:"left",open:this.state.showSideDrawer.left,closed:function(){return e.sideDrawerClosedHandler("left")}}),d.a.createElement("main",{className:"Content"},this.props.children,d.a.createElement(d.a.Fragment,null,d.a.createElement(f.a,null,X.default.map(function(a,t){return a.component?d.a.createElement(h.a,{key:t,path:a.path,exact:a.exact,name:a.name,render:function(t){return d.a.createElement(a.component,Object.assign({socket:e.props.socket,socketFn:e.props.socketFn},t))}}):null}),d.a.createElement(E.a,{from:"/",to:"/homepage"}))))),d.a.createElement(Oe,null),d.a.createElement(fe.a,{show:this.props.showLangModal,current_language:g.a.language,toggle:this.props.toggle_lang_modal,changeLanguage:this.changeLanguage,languages:Object(r.a)({},this.props.langues.filter(function(e){return e.avancement>=.8}),{unavailable:{unavailable:!0}})})))}}]),a}(m.Component),ye=_;a.default=C()({layout:"Layout"},{dispatchOnMount:!0})(Object(N.b)(function(e){return{ttsActive:e.tts.ttsActive,languei18nCode:e.langue.languei18nCode,showLangModal:e.langue.showLangModal,langues:e.langue.langues,dispositifs:e.dispositif.dispositifs}},ye)(Object(p.b)()(je)))}}]);
//# sourceMappingURL=3.43d02f40.chunk.js.map